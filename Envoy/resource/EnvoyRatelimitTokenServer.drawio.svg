<svg host="65bd71144e" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="638px" height="461px" viewBox="-0.5 -0.5 638 461" content="&lt;mxfile&gt;&lt;diagram id=&quot;R-L9op2CYOjnu2OS8UqJ&quot; name=&quot;Page-1&quot;&gt;1VpLc6M4EP41OiYF4iWOgO3dw2zV1mardnIkRrGpweDCZOLMr9+WkDB62EM5TuxcUqJpCan769bX7SAv2+z/aPPt+q+moBXCTrFH3gxhTGICf5ngrRcEsdMLVm1Z9CL3IHgof1EhlGovZUF3imLXNFVXblXhsqlruuwUWd62zauq9txU6le3+YoagodlXpnS/8qiW4tj4egg/5OWq7X8shvG/ZtNLpXFSXbrvGheRyJvjrysbZquH232Ga2Y7aRd+nmLI2+HjbW07qZMwP2En3n1Is4m9tW9ycO2zUtdUKbvIi99XZcdfdjmS/b2FbwLsnW3qcRrsRxtO7o/uiV3OCgAhDYb2rVvoCInhMI2AhwuEc+vB1P7EjDrkZk9adRcuHc1rH2wAAyEEewG8QyD/Nv8oDUzCW3hXIZ54KCdaoNd18KUrKmaFiR1U4Nm+lxWlSbKq3JVw+MSDAMLeykzWwkoS8SLTVkU7DNWox/c4lzG7thR7Y590+6hzewXsLpvWP0fWpS7q2MRE9UmFpPgwGKT+AI2CczQnIcoTlHq80GIUocNSIwIH8QZG88DRDKUwgDkMJ6heYTiBBEfUuayLbcdYFCK0NxH6QIlLl/IRcmCzyewdHsTDvACX3GAF5gecLHFA+EFPBAaHhib0LAzzpgVE4cLQyZJ5lxtgUjvu4C7DExOEJkLlyUZ04EBezW4haAk4gPujVj1ZtqvHDJ3xVwHBvDRfgOAgXQ+uNGGEHMp2BJ8N7RB5doI0NPSpyIgMhDwrYEEneXLNb26ZXxPS9gyZXyGZYg1OwH4WS6JUQIoyqwJB2CdoDTkuHRYzmFIhVzmcRzPmRpDKhG5CDJpEop4YAMeTjH/BkRFzGGdBmwdhv4JakyS8XggTJNInT7YUi408uwNeT1wrxgPseF1yJHONLuDKSPheNW41XHj0rpIGF9nLKnKd7tyqdqT7svuO6NA94F4ehSEiI1n+/HDm3yo4dDf5QLs4fGwAns8TONPcl6/OVoYpYHmOThA89IuqRInXd6uaDdKKqZ/R/6zUQopa2mVd+VPdRM2n4ov/N2UsL0BPpGWNDxXg0W/eTFrXDnoC2nUyMBXf2RjIQ6x4diTUCe3eKpKmY4UPIaKOw0qI3Q8KuC4JFQiEyrBNaGi1WGefyZSXC1jGez4gkhxDaR49zxDQa4BnhvwiwjSf2pnX2mG4v4imrEryHIRmdeODkTw+rf8iVYq/qYXey3dlb/yJ74eA9OW2YVbKkhRMDt1i4h+h5iMhi6DAjzHjimx0p1z77peoHr+fXCSKs3z846+28MTOha/zQVDWH/UDTCO4fCaMaxle19vkUyNYS3Ze9HHhbDJLN17STKgzIl46Lm8pBr4Wl9SJaNCZkpdzBdkOcFcWdJVHFasu/MEdVC4YqMTldHNRz4+GfnOvRPE0UVQd6fNuEzkm625T4t8yR4kXRjNOkoeziMB4Y2RgOhSJAB/GgnAJl20IOXWg9X77TUdhcEtXcxmD/cd4SlYuoxQd2J8auz+dCF4XoAGZoD61wxQvQw7O0A1quB+IEs322q+StL7m5nf8DFm97bRNFB7S1pLiflWv7j5WinrUPVsIU0kbZCSJLFzDLLgJQBoeqxfypQz3qYyGQUUDj5/JRc8yR94wypdyPZuxA/Ki4p4TGX67xHxPTg9zkRBQrgQdiAOT5jQcnL9nNtyS6uyppbzfrk8eST4BlKDAy9WgH13U+WM5Vee81sb0zsb5+U+cs1E52n9CF9PUFMzncZEfDIt0YEP8reRmgDy0f0GGnXyQ+WneBj0K54NHbMZG4k6KZW/C0HCi+e2ZmyE0pS3OkKmABXSl4v7I6z4wI+Aqqq/Hd7hWwp888fFd9ClW61mLGTpqjlESyH43Oa33tJ0P675jc2WJlg1zDfsp6X6abcdnPOVovdIU2zchJS9XOmr6wUvPB7+I6tXP/xbmzf/Hw==&lt;/diagram&gt;&lt;/mxfile&gt;">
    <defs/>
    <g>
        <rect x="147" y="140" width="490" height="320" rx="48" ry="48" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/>
        <rect x="187" y="200" width="60" height="30" fill="none" stroke="none" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 58px; height: 1px; padding-top: 215px; margin-left: 188px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
                                Token server
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="217" y="219" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    Token serv...
                </text>
            </switch>
        </g>
        <rect x="267" y="0" width="250" height="90" rx="13.5" ry="13.5" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 45px; margin-left: 268px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
                                Redis
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="392" y="49" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    Redis
                </text>
            </switch>
        </g>
        <rect x="341" y="310" width="120" height="60" rx="9" ry="9" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 340px; margin-left: 342px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
                                更新所有匹配的descriptor的信息到redis
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="401" y="344" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    更新所有匹配的descriptor的信息到redis
                </text>
            </switch>
        </g>
        <rect x="187" y="310" width="120" height="60" rx="9" ry="9" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 340px; margin-left: 188px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
                                descriptor匹配,根据参数与本地的规则配置比对,找到所有配置了的descriptor
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="247" y="344" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    descriptor匹配,根据参数与本地的规则配置比对,找到所有配置了的descript...
                </text>
            </switch>
        </g>
        <rect x="417" y="185" width="120" height="60" rx="9" ry="9" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 215px; margin-left: 418px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
                                LocalCache
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="477" y="219" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    LocalCache
                </text>
            </switch>
        </g>
        <rect x="497" y="310" width="120" height="60" rx="9" ry="9" fill="rgb(255, 255, 255)" stroke="rgb(0, 0, 0)" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 340px; margin-left: 498px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">
                                校验descriptor的状态决定是否触发限流,触发限流需要附带更新LocalCache
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="557" y="344" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="12px" text-anchor="middle">
                    校验descriptor的状态决定是否触发限流,触发限流需要附带更新LocalCache
                </text>
            </switch>
        </g>
        <path d="M 557 310 L 538.31 221.23" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/>
        <path d="M 537.23 216.09 L 542.1 222.22 L 538.31 221.23 L 535.25 223.66 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 262px; margin-left: 547px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">
                                6 触发限流时更新localCache
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="547" y="265" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    6 触发限流时更新localCac...
                </text>
            </switch>
        </g>
        <path d="M 447 245 L 404.68 304.8" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/>
        <path d="M 401.65 309.09 L 402.83 301.35 L 404.68 304.8 L 408.55 305.4 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 276px; margin-left: 430px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">
                                3. 查看本地缓存是否限流
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="430" y="279" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    3. 查看本地缓存是否限流
                </text>
            </switch>
        </g>
        <path d="M 17 380 L 180.8 341.46" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/>
        <path d="M 185.91 340.26 L 179.9 345.27 L 180.8 341.46 L 178.3 338.45 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 359px; margin-left: 107px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">
                                1. 请求带上了所有匹配该请求的
                                <br/>
                                descriptor
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="107" y="362" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    1. 请求带上了所有匹配该请求的...
                </text>
            </switch>
        </g>
        <path d="M 307 340 L 334.63 340" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/>
        <path d="M 339.88 340 L 332.88 343.5 L 334.63 340 L 332.88 336.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 341px; margin-left: 322px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">
                                2
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="322" y="344" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    2
                </text>
            </switch>
        </g>
        <path d="M 371 310 L 330.68 96.26" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/>
        <path d="M 329.71 91.1 L 334.44 97.33 L 330.68 96.26 L 327.57 98.63 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 172px; margin-left: 348px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">
                                4 查询和更新descriptor状态;
                                <br/>
                                因为一个请求可能会匹配多个
                                <br/>
                                descriptor,这里做了优化,合并成
                                <br/>
                                一个pipeline请求
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="348" y="176" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    4 查询和更新descriptor状态;...
                </text>
            </switch>
        </g>
        <path d="M 557 370 L 557 410 Q 557 420 547.01 420.36 L 13.36 439.77" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/>
        <path d="M 8.12 439.96 L 14.99 436.21 L 13.36 439.77 L 15.24 443.2 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 424px; margin-left: 410px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">
                                7 返回限流结果
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="410" y="427" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    7 返回限流结果
                </text>
            </switch>
        </g>
        <path d="M 461 340 L 490.63 340" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/>
        <path d="M 495.88 340 L 488.88 343.5 L 490.63 340 L 488.88 336.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/>
        <g transform="translate(-0.5 -0.5)">
            <switch>
                <foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;">
                    <div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 339px; margin-left: 478px;">
                        <div data-drawio-colors="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255); " style="box-sizing: border-box; font-size: 0px; text-align: center;">
                            <div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; background-color: rgb(255, 255, 255); white-space: nowrap;">
                                5
                            </div>
                        </div>
                    </div>
                </foreignObject>
                <text x="478" y="342" fill="rgb(0, 0, 0)" font-family="Helvetica" font-size="11px" text-anchor="middle">
                    5
                </text>
            </switch>
        </g>
    </g>
    <switch>
        <g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/>
        <a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank">
            <text text-anchor="middle" font-size="10px" x="50%" y="100%">
                Viewer does not support full SVG 1.1
            </text>
        </a>
    </switch>
</svg>